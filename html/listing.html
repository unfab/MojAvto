<div id="header"></div>

<script>
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header').innerHTML = data;
      // Initialize your menu scripts here if needed
    });
</script>
<link rel="stylesheet" href="css/styles.css" />
<script src="js/userMenu.js" defer></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const user = JSON.parse(localStorage.getItem("mojavto_loggedUser"));
    const userMenu = document.getElementById("userMenu");
    const loginLink = document.getElementById("loginLink");
    const userDropdownBtn = document.getElementById("userDropdownBtn");
    const userDropdown = document.getElementById("userDropdown");
    const logoutBtn = document.getElementById("logoutBtn");

    if (user && user.fullname) {
      userMenu.style.display = "inline-block";
      loginLink.style.display = "none";
      userDropdownBtn.textContent = `Moj račun ▼ (${user.fullname})`;
    } else {
      userMenu.style.display = "none";
      loginLink.style.display = "inline";
    }

    userDropdownBtn?.addEventListener("click", () => {
      userDropdown.style.display = userDropdown.style.display === "block" ? "none" : "block";
    });

    document.addEventListener("click", (e) => {
      if (!userMenu.contains(e.target)) {
        userDropdown.style.display = "none";
      }
    });

    logoutBtn?.addEventListener("click", (e) => {
      e.preventDefault();
      localStorage.removeItem("mojavto_loggedUser");
      alert("Odjava uspešna.");
      window.location.href = "login.html";
    });
  });
</script>
<main class="listing-details">
  <div class="image-gallery">
    <button id="prevBtn">⟨</button>
    <img id="mainImage" src="" alt="Vozilo" />
    <button id="nextBtn">⟩</button>
  </div>
  <div class="thumbnails" id="thumbnails"></div>
</main>

<script src="js/listings.js" defer></script>
